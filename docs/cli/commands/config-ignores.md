# promptrek config-ignores

Configure `.gitignore` to exclude editor-specific files.

## Synopsis

```bash
promptrek config-ignores [OPTIONS]
```

## Description

The `config-ignores` command helps manage your `.gitignore` file to automatically exclude editor-specific files generated by PrompTrek. This prevents accidentally committing generated prompt files to version control.

**What it does**:

1. Adds editor file patterns to `.gitignore`
2. Optionally removes already-committed files from git tracking
3. Respects the `ignore_editor_files` setting in your PrompTrek config

## Options

**`--config FILE`**
: Path to PrompTrek config file (auto-detects `.promptrek.yaml` if not specified)

**`--remove-cached`**
: Remove matching files from git cache (untrack already-committed files)

**`--dry-run`**
: Show what would be done without making changes

## File Patterns

PrompTrek adds these patterns to `.gitignore`:

```gitignore
# PrompTrek - AI Editor Files
.claude/
.cursorrules
.cursor/
.continue/
.cline/
.cline-rules/
.windsurf/
.amazonq/
.kiro/
.assistant/
.promptrek/variables.promptrek.yaml
variables.promptrek.yaml

# GitHub Copilot
.github/copilot-instructions.md
.github/instructions/
.github/prompts/
```

## Examples

### Basic Usage

Configure `.gitignore` in current directory:

```bash
promptrek config-ignores
```

Output:
```
üìù Configuring .gitignore in /path/to/project...
‚úÖ Added 12 pattern(s) to .gitignore
```

### With Specific Config File

```bash
promptrek config-ignores --config backend.promptrek.yaml
```

### Dry Run Mode

Preview changes without modifying files:

```bash
promptrek config-ignores --dry-run
```

Output:
```
üîç Dry run mode - would perform the following actions:
  ‚Ä¢ Add editor file patterns to /path/to/project/.gitignore
```

### Remove Cached Files

Untrack already-committed editor files:

```bash
promptrek config-ignores --remove-cached
```

Output:
```
üìù Configuring .gitignore in /path/to/project...
‚úÖ Added 12 pattern(s) to .gitignore
üóëÔ∏è  Removed 5 file(s) from git cache
üí° Remember to commit these changes to complete the un-tracking
```

## Use Cases

### Initial Project Setup

When setting up PrompTrek for the first time:

```bash
# 1. Initialize PrompTrek
promptrek init

# 2. Configure .gitignore
promptrek config-ignores

# 3. Generate files
promptrek generate --all

# 4. Commit only source files
git add project.promptrek.yaml .gitignore
git commit -m "feat: add PrompTrek configuration"
```

### Cleaning Up Committed Files

If you accidentally committed generated files:

```bash
# 1. Add to .gitignore and remove from tracking
promptrek config-ignores --remove-cached

# 2. Commit the changes
git add .gitignore
git commit -m "chore: untrack generated editor files"

# 3. Push to remove from remote
git push
```

### Verifying Configuration

Check what would be added without making changes:

```bash
promptrek config-ignores --dry-run
```

## Complete Workflow

### New Project

```bash
# Create PrompTrek config
promptrek init -o project.promptrek.yaml

# Configure .gitignore
promptrek config-ignores

# Generate editor files
promptrek generate --all

# Verify .gitignore is working
git status
# Should NOT show:
# - .claude/
# - .cursorrules
# - etc.

# Commit source files only
git add project.promptrek.yaml .gitignore
git commit -m "feat: add AI editor configuration"
```

### Existing Project

```bash
# If you have existing PrompTrek files:

# 1. Configure .gitignore and remove tracked files
promptrek config-ignores --remove-cached

# 2. Verify files are untracked
git status

# 3. Commit changes
git add .gitignore
git commit -m "chore: configure .gitignore for PrompTrek"

# 4. If files were previously committed, push to update remote
git push
```

## Generated `.gitignore` Entries

### Complete Block

PrompTrek adds this block to `.gitignore`:

```gitignore
# =============================================================================
# PrompTrek - AI Editor Generated Files
# =============================================================================
# These files are generated from .promptrek.yaml source files and should not
# be committed. Generate them locally with: promptrek generate --all

# Claude Code
.claude/

# Cursor IDE
.cursorrules
.cursor/

# Continue Extension
.continue/

# Cline Extension
.cline/
.cline-rules/

# Windsurf IDE
.windsurf/

# Amazon Q Developer
.amazonq/

# Kiro Editor
.kiro/

# JetBrains AI Assistant
.assistant/

# PrompTrek local variables (contains secrets)
.promptrek/variables.promptrek.yaml
variables.promptrek.yaml

# GitHub Copilot
.github/copilot-instructions.md
.github/instructions/
.github/prompts/

# =============================================================================
```

### Minimal Block

If patterns already exist, PrompTrek only adds missing ones:

```gitignore
# Existing .gitignore content...

# PrompTrek additions (only new patterns)
.claude/
.amazonq/
```

## Configuration Settings

### `ignore_editor_files` Setting

Control behavior with PrompTrek config:

```yaml
# project.promptrek.yaml
schema_version: "3.1.0"

# Control .gitignore management
ignore_editor_files: true   # Default: automatically manage .gitignore
# ignore_editor_files: false  # Disable automatic .gitignore management
```

### When Disabled

If `ignore_editor_files: false`:

```bash
$ promptrek config-ignores

‚ö†Ô∏è  ignore_editor_files is set to False in config.
   Set it to True if you want to automatically exclude editor files.

Continue anyway? [y/N]
```

## Integration with Generate

The `generate` command respects `ignore_editor_files`:

```yaml
# Auto-manage .gitignore (default)
ignore_editor_files: true
```

```bash
$ promptrek generate --all

‚úÖ Generated files for claude
‚úÖ Generated files for cursor
üìù Updated .gitignore with editor file patterns
```

## Troubleshooting

### Files Still Tracked

**Problem**: Generated files still appear in `git status`

**Solution**: Use `--remove-cached` to untrack them

```bash
promptrek config-ignores --remove-cached
git commit -m "chore: untrack generated files"
```

### Permission Denied

**Problem**: Cannot write to `.gitignore`

**Solution**: Check file permissions

```bash
# Check permissions
ls -la .gitignore

# Fix if needed
chmod 644 .gitignore
```

### No Config File Found

**Problem**: `No PrompTrek config file found`

**Solution**: Specify config file or create one

```bash
# Specify config
promptrek config-ignores --config project.promptrek.yaml

# Or create config
promptrek init
```

### Already in `.gitignore`

**Problem**: Patterns already exist

**Output**:

```
‚úÖ All patterns already present in .gitignore
```

This is normal - PrompTrek detected patterns are already configured.

## Best Practices

!!! tip "Run Early"
    Configure `.gitignore` before generating files:
    ```bash
    promptrek config-ignores
    promptrek generate --all
    ```

!!! warning "Remove Cached Files"
    If you committed generated files before configuring `.gitignore`, use `--remove-cached`:
    ```bash
    promptrek config-ignores --remove-cached
    git commit -m "chore: untrack generated files"
    ```

!!! tip "Verify with Dry Run"
    Preview changes before applying:
    ```bash
    promptrek config-ignores --dry-run
    ```

!!! note "Team Workflow"
    Ensure `.gitignore` is committed and shared:
    ```bash
    promptrek config-ignores
    git add .gitignore
    git commit -m "chore: configure .gitignore for PrompTrek"
    git push
    ```

## Related Commands

- `promptrek init` - Initialize configuration
- `promptrek generate` - Generate editor files
- `promptrek install-hooks` - Install pre-commit hooks

## See Also

- [Pre-commit Hooks](../../user-guide/workflows/pre-commit.md)
- [Generate Command](generate.md)
- [Install Hooks Command](install-hooks.md)
